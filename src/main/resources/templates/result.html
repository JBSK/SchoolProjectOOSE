<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
	<head th:replace="fragments/headTag-resultpage :: headTag"></head>
	<body>
        <div id="fb-root"></div>
        <script>
        	//Facebook share begin
	        window.fbAsyncInit = function() {
	            FB.init({
	                xfbml      : true,
	                version    : 'v2.5'
	            });
	        };
	
	        (function(d, s, id){
	            var js, fjs = d.getElementsByTagName(s)[0];
	            if (d.getElementById(id)) {return;}
	            js = d.createElement(s); js.id = id;
	            js.src = "https://connect.facebook.net/en_US/sdk.js";
	            fjs.parentNode.insertBefore(js, fjs);
	        }(document, 'script', 'facebook-jssdk'));
			//Facebook share end
        
            // Using jsPDF to save the page as PDF.
		    function PDFFromHTML() {
				
		    	svgAsPngUri(document.getElementById("radarChartBox").firstChild, {}, function(uri) {
				    
		    		if(document.getElementById('barChartContainer').firstChild == null)
		    			return alert('Wacht tot dat de pagina volledig geladen is.');
		    		
		    		var doc = new jsPDF();
				    			
				    	doc.text(15, 20, 'Resultaten');
				    	var specialElementHandlers = {
				    			'#radarChartBox': function(element, renderer){
				    				return true;
				    			}, 
				    			'#barChartContainer': function(element, renderer){
				    				return true;
				    			}
				    		};
				    	
						doc.fromHTML($('#uitkomst').get(0), 15, 15, {
							'width': 170,
							'elementHandlers': specialElementHandlers
						});
						
						var barChart = document.getElementById('barChartContainer').firstChild.firstChild;
						
						doc.addImage(uri, 'PNG', 55, 40, 100, 100);
						doc.addImage(barChart.toDataURL(), 'PNG', 40, 155, 100, 100);
						
						
						doc.addPage();
						doc.fromHTML($('#primaryType-info').get(0), 15, 15, {
							'width': 170,
							'elementHandlers': specialElementHandlers
						});
						
						doc.addPage();		
						doc.fromHTML($('#secondaryType-info').get(0), 15, 15, {
							'width': 170,
							'elementHandlers': specialElementHandlers
						});
						
				    	doc.save('Test.pdf');
				});
		    }
        </script>

		<div th:include="fragments/menu" th:remove="tag"></div>
		<div id="main" class="pure-skin-PT">
            <div class="content">
                <div id="naviButtons" class="pure-g">
                    <div class="pure-u-1 pure-u-md-1-2">
                        <div class="socialmediabar">
                            <!-- Facebook -->
                            <div class="fb-share-button" data-href="http://halewyn.oose.icaprojecten.nl" data-layout="button"></div>

                            <!-- LinkedIn -->
                            <script src="//platform.linkedin.com/in.js" type="text/javascript"></script>
                            <script type="IN/Share" data-url="http://halewyn.oose.icaprojecten.nl"></script>

                            <!-- Twitter -->
                            <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://halewyn.oose.icaprojecten.nl" th:attr="data-text=${tweetText}" data-hashtags="persoonlijkheidstest,zelfkennis" data-dnt="true">Tweet</a>
                            <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

                            <!-- Google+ -->
                            <script src="https://apis.google.com/js/platform.js" async="true" defer="true"></script>
                            <div class="g-plus" data-action="share"></div>
                        </div>
                    </div>
                    <div class="pure-u-1 pure-u-md-1-2">
                        <a href="javascript:PDFFromHTML()"> <button class="downloadPDF pure-button" type="button" th:text="${TenthButtonText.buttonText}"></button> </a>
                    </div>
                </div>
				<div id="resultaten">
	                <h2 class="content-subhead" th:text="${FifthContentBox.contentTitle}"></h2>
	                <p th:text="${FifthContentBox.contentText}"></p>
	                <div class="pure-g resultrow1">
	                    <div id="radarChartContainer" class="pure-u-1 pure-u-lg-1-3">
	                        <div class="radarChart" id="radarChartBox" th:style="'background-image: url(' + @{${SecondImage.imagePath}} + ');'" th:alt="${SecondImage.imageAlt}"></div>
	                    </div>
	                    <div id="barChartCont" class="pure-u-1 pure-u-lg-1-3">
	                        <div class="barChart" id="barChartContainer"></div>
	                    </div>
	                    <div id="uitkomst" class="pure-u-1 pure-u-lg-1-3">
	                        <p class="primaryPType">
	                            Uw primaire persoonlijkheidstype is: <strong th:text="${primaryPersonalityType.name}"></strong>
	                        </p>
	                        <p class="secondaryPType">
	                            Uw secundaire persoonlijkheidstype is: <strong th:text="${secondaryPersonalityType.name}"></strong>
	                        </p>
	                        <p class="gegevenResult"></p>
	                    </div>
	                </div><!-- end resultRow1-->
					<!-- end resultRow1-->
	                <div class="pure-g resultrow2">
	                    <div id="primaryType-info" class="textResultRow  pure-u-1">
	                        <h3 th:text="${primaryPersonalityType.name}"></h3>
	                        <p th:text="${primaryPersonalityType.primaryDescription}"></p>
	                    </div>
					</div>
					<div class="pure-g resultrow2">
	                    <div id="secondaryType-info" class="textResultRow pure-u-1">
	                        <h3 th:text="${secondaryPersonalityType.name}"></h3>
	                        <p th:text="${secondaryPersonalityType.secondaryDescription}"></p>
	                    </div>
	                </div><!-- end resultRow2-->
                </div> <!-- end resultaten -->
                <div class="pure-g resultrow3">
                	<div class="pure-u-1">
                        <a href="showLinks" class="readMore pure-button" th:text="${EleventhButtonText.buttonText}"></a>
                    </div>
                </div><!-- end resultRow2-->
            </div><!-- end content -->
		    <div th:include="fragments/footer" th:remove="tag"></div>
		</div><!-- end pure skin / main -->
		<div th:include="fragments/GraphsJS" th:remove="tag"></div>
	</body>
</html>